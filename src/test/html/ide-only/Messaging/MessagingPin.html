<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head profile="http://selenium-ide.openqa.org/profiles/test-case">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="selenium.base" href="https://selenium.test.mattermost.com/" />
<title>MessagingFlags</title>
</head>
<body>
<table cellpadding="1" cellspacing="1" border="1">
<thead>
<tr><td rowspan="1" colspan="3">MessagingFlags</td></tr>
</thead><tbody>
<!--LOG IN-->
<tr>
	<td>openAndWait</td>
	<td>/login</td>
	<td></td>
</tr>
<!--DisableAnimations-->
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>name=loginId</td>
	<td>test@test.com</td>
</tr>
<tr>
	<td>type</td>
	<td>name=password</td>
	<td>passwd</td>
</tr>
<tr>
	<td>click</td>
	<td>id=loginButton</td>
	<td></td>
</tr>
<tr>
	<td>pause</td>
	<td>3000</td>
	<td></td>
</tr>
<!--Sleep-->
<!--Sleep-->
<!--Sleep-->
<tr>
	<td>waitForElementPresent</td>
	<td>id=post_textbox</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=createPublicChannel</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=createPublicChannel</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=newChannelName</td>
	<td></td>
</tr>
<!--Store timestamp to append to channel name (to make it unique)-->
<tr>
	<td>store</td>
	<td>javascript{(new Date().getFullYear()+&quot;&quot;+(new Date().getMonth()+1)+&quot;&quot;+new Date().getDate())+&quot;-&quot;+(new Date().getHours()+&quot;&quot; + new Date().getMinutes() + &quot;&quot; + new Date().getSeconds())}</td>
	<td>datetime</td>
</tr>
<tr>
	<td>type</td>
	<td>id=newChannelName</td>
	<td></td>
</tr>
<!--Create new test channel appending datetime to the name-->
<tr>
	<td>type</td>
	<td>id=newChannelName</td>
	<td>Pin-${datetime}</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=form.form-horizontal &gt; div.modal-footer &gt; button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=form.form-horizontal &gt; div.modal-footer &gt; button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=strong.heading</td>
	<td>Pin-${datetime}</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=post_textbox</td>
	<td></td>
</tr>
<!--Post a message-->
<tr>
	<td>sendKeys</td>
	<td>id=post_textbox</td>
	<td>Pin the tail${KEY_ENTER}</td>
</tr>
<tr>
	<td>waitForValue</td>
	<td>id=post_textbox</td>
	<td></td>
</tr>
<tr>
	<td>verifyElementNotPresent</td>
	<td>css=span.post__pinned-badge &gt; span</td>
	<td></td>
</tr>
<tr>
	<td>pause</td>
	<td></td>
	<td>500</td>
</tr>
<!--Ensure that reactions remain in place when you pin and unpin a post-->
<!--Rollup needs updating; doing some things manually for now-->
<tr>
	<td>rollup</td>
	<td>openEmojiPickerForLastPost</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>//div[6]/div/img</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=span.post-reaction__emoji.emoticon</td>
	<td></td>
</tr>
<tr>
	<td>rollup</td>
	<td>openDotMenuForLastPost</td>
	<td></td>
</tr>
<!--Rollup needs updating; doing some things manually for now-->
<tr>
	<td>rollup</td>
	<td>dotMenuItemVerifyAndSelect</td>
	<td>Item=Pin to channel</td>
</tr>
<tr>
	<td>pause</td>
	<td></td>
	<td>500</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=span.post-reaction__emoji.emoticon</td>
	<td></td>
</tr>
<tr>
	<td>rollup</td>
	<td>openDotMenuForLastPost</td>
	<td></td>
</tr>
<tr>
	<td>rollup</td>
	<td>dotMenuItemVerifyAndSelect</td>
	<td>Item=Un-pin from channel</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=span.post-reaction__emoji.emoticon</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=span.post-reaction__emoji.emoticon</td>
	<td></td>
</tr>
<!--Pin a message in center, badge appears-->
<tr>
	<td>rollup</td>
	<td>openDotMenuForLastPost</td>
	<td></td>
</tr>
<tr>
	<td>rollup</td>
	<td>dotMenuItemVerifyAndSelect</td>
	<td>Item=Pin to channel</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=span.post__pinned-badge &gt; span</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=span.comment-icon &gt; #Layer_1</td>
	<td></td>
</tr>
<!--Reply using reply arrow-->
<tr>
	<td>click</td>
	<td>css=span.comment-icon &gt; #Layer_1</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=reply_textbox</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>//input[@value='Add Comment']</td>
	<td></td>
</tr>
<tr>
	<td>sendKeys</td>
	<td>id=reply_textbox</td>
	<td>on the donkey.</td>
</tr>
<tr>
	<td>click</td>
	<td>//input[@value='Add Comment']</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=p</td>
	<td>Pin the tail</td>
</tr>
<tr>
	<td>waitForValue</td>
	<td>id=reply_textbox</td>
	<td></td>
</tr>
<!--Pin visible on parent post in RHS reply thread-->
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.sidebar--right__expand</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=button.sidebar--right__expand</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=span.post__pinned-badge &gt; span</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=p:contains('on the donkey.')</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.sidebar--right__expand</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=button.sidebar--right__expand</td>
	<td></td>
</tr>
<!--Viewing pinned posts in RHS, parent post only, no replies-->
<tr>
	<td>waitForElementPresent</td>
	<td>css=span.icon.icon__pin &gt; svg</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=span.icon.icon__pin &gt; svg</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.sidebar--right__expand</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=button.sidebar--right__expand</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=span.sidebar--right__title &gt; span</td>
	<td>Pinned posts in Pin-${datetime}</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=p</td>
	<td>Pin the tail</td>
</tr>
<tr>
	<td>verifyNotText</td>
	<td>//div[@id='sidebar-right']/div[2]/div/div[3]/div[2]/div/div/div[3]/div/div/div/div[2]/div/div/div/span/p</td>
	<td>on the donkey.</td>
</tr>
<tr>
	<td>verifyNotText</td>
	<td>css=p</td>
	<td>on the donkey.</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=span.post__pinned-badge &gt; span</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.sidebar--right__expand</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=button.sidebar--right__expand</td>
	<td></td>
</tr>
<!--Switch center to different channel, also changes in RHS-->
<tr>
	<td>waitForElementPresent</td>
	<td>link=Off-Topic*</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>link=Off-Topic*</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=strong.heading</td>
	<td>Off-Topic</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=span.sidebar--right__title &gt; span</td>
	<td>Pinned posts in Off-Topic</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=li &gt; span</td>
	<td>There are no pinned messages yet.</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.sidebar--right__expand</td>
	<td></td>
</tr>
<!--Return to original channel in center-->
<tr>
	<td>waitForElementPresent</td>
	<td>link=Pin-${datetime}</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>link=Pin-${datetime}</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=strong.heading</td>
	<td>Pin-${datetime}</td>
</tr>
<!--Pin icon toggles pinned posts RHS closed and open-->
<tr>
	<td>waitForElementPresent</td>
	<td>css=span.icon.icon__pin &gt; svg</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=span.icon.icon__pin &gt; svg</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementNotPresent</td>
	<td>css=button.sidebar--right__expand</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=span.icon.icon__pin &gt; svg</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=span.sidebar--right__title &gt; span</td>
	<td>Pinned posts in Pin-${datetime}</td>
</tr>
<!--Show posts pinned in a different channel-->
<tr>
	<td>waitForElementPresent</td>
	<td>link=Off-Topic</td>
	<td></td>
</tr>
<!--Pin two messages in Off-Topic-->
<tr>
	<td>click</td>
	<td>link=Off-Topic</td>
	<td></td>
</tr>
<tr>
	<td>pause</td>
	<td>2000</td>
	<td></td>
</tr>
<!--Sleep-->
<!--Sleep-->
<tr>
	<td>waitForElementPresent</td>
	<td>id=post_textbox</td>
	<td></td>
</tr>
<tr>
	<td>sendKeys</td>
	<td>id=post_textbox</td>
	<td>Off-Topic pin 1${KEY_ENTER}</td>
</tr>
<tr>
	<td>pause</td>
	<td>2000</td>
	<td></td>
</tr>
<!--Sleep-->
<!--Sleep-->
<tr>
	<td>waitForValue</td>
	<td>id=post_textbox</td>
	<td></td>
</tr>
<tr>
	<td>refreshAndWait</td>
	<td></td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=p:contains('Off-Topic pin 1')</td>
	<td></td>
</tr>
<tr>
	<td>verifyElementNotPresent</td>
	<td>css=span.post__pinned-badge &gt; span</td>
	<td></td>
</tr>
<!--Pin last post-->
<tr>
	<td>rollup</td>
	<td>openDotMenuForLastPost</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=button:contains('Pin to channel')</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=button:contains('Pin to channel')</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=span.post__pinned-badge &gt; span</td>
	<td></td>
</tr>
<tr>
	<td>sendKeys</td>
	<td>id=post_textbox</td>
	<td>Off-Topic pin 2${KEY_ENTER}</td>
</tr>
<tr>
	<td>waitForValue</td>
	<td>id=post_textbox</td>
	<td></td>
</tr>
<!--Search and edit, verify still Pinned and edits show in center and RHS-->
<tr>
	<td>refreshAndWait</td>
	<td></td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>link=Pin-${datetime}</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>link=Pin-${datetime}</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=input.search-bar</td>
	<td></td>
</tr>
<tr>
	<td>sendKeys</td>
	<td>css=input.search-bar</td>
	<td>tail${KEY_ENTER}</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=span.sidebar--right__title &gt; span</td>
	<td>Search Results</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=span.search-highlight</td>
	<td>tail</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=p</td>
	<td>Pin the tail</td>
</tr>
<!--Edit pinned post in search results RHS-->
<tr>
	<td>verifyTextPresent</td>
	<td>Pinned*Jump*Pin the tail</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>xpath=(//button[@type='button'])[3]</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>xpath=(//button[@type='button'])[3]</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.style--none:contains('Edit')</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=button.style--none:contains('Edit')</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=edit_textbox</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>id=edit_textbox</td>
	<td>Pin the tail</td>
</tr>
<tr>
	<td>sendKeys</td>
	<td>id=edit_textbox</td>
	<td> on the other${KEY_ENTER}</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=p</td>
	<td>Pin the tail on the other</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=span.post-edited__indicator &gt; span</td>
	<td>(edited)</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.sidebar--right__expand</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=button.sidebar--right__expand</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=span.post__pinned-badge &gt; span</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=button.sidebar--right__expand</td>
	<td></td>
</tr>
<!--Search and un-pin, verify Pinned badge removed in center and RHS-->
<tr>
	<td>verifyTextPresent</td>
	<td>Pinned*Jump*Pin the tail</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>xpath=(//button[@type='button'])[3]</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>xpath=(//button[@type='button'])[3]</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.style--none:contains('Un-pin')</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=button.style--none:contains('Un-pin')</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=p</td>
	<td>Pin the tail on the other</td>
</tr>
<tr>
	<td>waitForTextNotPresent</td>
	<td>Pinned*Jump*Pin the tail</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementNotPresent</td>
	<td>css=ul.post__header--info &gt; li.col &gt; span.post__pinned-badge &gt; span</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementNotPresent</td>
	<td>css=span.post__pinned-badge &gt; span</td>
	<td></td>
</tr>
<!--View pinned posts to verify post was un-pinned-->
<tr>
	<td>click</td>
	<td>css=span.icon.icon__pin &gt; svg</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=span.sidebar--right__title &gt; span</td>
	<td>Pinned posts in Pin-${datetime}</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=div.sidebar--right__subheader &gt; ul &gt; li &gt; span</td>
	<td>There are no pinned messages yet.</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>//div[@id='search-items-container']/div/ul/li[2]/span</td>
	<td>All members of this channel can pin important or useful messages.</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>//div[@id='search-items-container']/div/ul/li[3]/span</td>
	<td>Pinned messages are visible to all channel members.</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>//div[@id='search-items-container']/div/ul/li[4]/span</td>
	<td>To pin a message: Go to the message that you want to pin and click [...] &gt; &quot;Pin to channel&quot;.</td>
</tr>
<!--Pin in center while empty pinned RHS is open-->
<!--*** Manually pin the Pin the tail... post-->
<tr>
	<td>waitForNotText</td>
	<td>css=div.sidebar--right__subheader &gt; ul &gt; li &gt; span</td>
	<td>There are no pinned messages yet.</td>
</tr>
<!--Verify pinned post appears in RHS-->
<tr>
	<td>waitForElementPresent</td>
	<td>css=span.post__pinned-badge &gt; span</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>Pinned*Jump*Pin the tail</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.sidebar--right__close</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=button.sidebar--right__close</td>
	<td></td>
</tr>
<!--Verify post in center has Pinned badge-->
<tr>
	<td>waitForElementPresent</td>
	<td>link=Pin-${datetime}</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>link=Pin-${datetime}</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=span.post__pinned-badge &gt; span</td>
	<td>Pinned</td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>Pinned*Pin the tail</td>
	<td></td>
</tr>
<!--Create fresh test channel-->
<tr>
	<td>waitForElementPresent</td>
	<td>id=createPublicChannel</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=createPublicChannel</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=newChannelName</td>
	<td></td>
</tr>
<!--Store timestamp to append to channel name (to make it unique)-->
<tr>
	<td>store</td>
	<td>javascript{(new Date().getFullYear()+&quot;&quot;+(new Date().getMonth()+1)+&quot;&quot;+new Date().getDate())+&quot;-&quot;+(new Date().getHours()+&quot;&quot; + new Date().getMinutes() + &quot;&quot; + new Date().getSeconds())}</td>
	<td>datetime</td>
</tr>
<tr>
	<td>type</td>
	<td>id=newChannelName</td>
	<td></td>
</tr>
<!--Create new test channel appending datetime to the name-->
<tr>
	<td>type</td>
	<td>id=newChannelName</td>
	<td>Pin2-${datetime}</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=form.form-horizontal &gt; div.modal-footer &gt; button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=form.form-horizontal &gt; div.modal-footer &gt; button.btn.btn-primary</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=strong.heading</td>
	<td>Pin2-${datetime}</td>
</tr>
<tr>
	<td>storeText</td>
	<td>css=strong.heading</td>
	<td>pin2channel</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=post_textbox</td>
	<td></td>
</tr>
<!--Post a message-->
<tr>
	<td>sendKeys</td>
	<td>id=post_textbox</td>
	<td>For both flagging and pinning!${KEY_ENTER}</td>
</tr>
<tr>
	<td>waitForValue</td>
	<td>id=post_textbox</td>
	<td></td>
</tr>
<tr>
	<td>verifyElementNotPresent</td>
	<td>css=span.post__pinned-badge &gt; span</td>
	<td></td>
</tr>
<!--Pin the message-->
<tr>
	<td>rollup</td>
	<td>openDotMenuForLastPost</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=button:contains('Pin to channel')</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=button:contains('Pin to channel')</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=span.post__pinned-badge &gt; span</td>
	<td>Pinned</td>
</tr>
<!--Flag the same message-->
<!--No longer finding the flag to click-->
<!--*** Manually hover-->
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.style--none.flag-icon__container </td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=button.style--none.flag-icon__container </td>
	<td></td>
</tr>
<tr>
	<td>mouseOver</td>
	<td>css=button.style--none.flag-icon__container </td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=#flagTooltip &gt; div.tooltip-inner &gt; span</td>
	<td>Unflag</td>
</tr>
<!--Get permalink-->
<tr>
	<td>rollup</td>
	<td>openDotMenuForLastPost</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=button:contains('Permalink')</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=button:contains('Permalink')</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>//div[2]/div/div/div[2]/p</td>
	<td>The link below allows authorized users to see your post.</td>
</tr>
<tr>
	<td>storeText</td>
	<td>id=linkModalTextArea</td>
	<td>permalinkpin</td>
</tr>
<!--Open permalink-->
<tr>
	<td>open</td>
	<td>${permalinkpin}</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=#archive-link-home &gt; a &gt; span</td>
	<td>Click here to jump to recent messages.</td>
</tr>
<!--Open flagged posts RHS, verify pinned in center and RHS-->
<tr>
	<td>waitForElementPresent</td>
	<td>id=channelHeaderFlagButton</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=channelHeaderFlagButton</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=span.sidebar--right__title &gt; span</td>
	<td>Flagged Posts</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=span.post__pinned-badge &gt; span</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=div.post__header--info &gt; div.col &gt; span.post__pinned-badge &gt; span</td>
	<td>Pinned</td>
</tr>
<!--Un-pin in center in permalink view-->
<!--rollup doesn't open the center permalink view-->
<!--*** Open ... menu manually in center on permalink view-->
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.style--none:contains('Un-pin')</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=button.style--none:contains('Un-pin')</td>
	<td></td>
</tr>
<!--Verify un-pinned in center permalink view and in flagged posts RHS-->
<tr>
	<td>waitForElementNotPresent</td>
	<td>css=span.post__pinned-badge &gt; span</td>
	<td></td>
</tr>
<tr>
	<td>waitForNotText</td>
	<td>css=div.post__header--info &gt; div.col &gt; span.post__pinned-badge &gt; span</td>
	<td>Pinned</td>
</tr>
<!--Return to non-permalink view-->
<tr>
	<td>waitForText</td>
	<td>css=#archive-link-home &gt; a &gt; span</td>
	<td>Click here to jump to recent messages.</td>
</tr>
<tr>
	<td>click</td>
	<td>css=#archive-link-home &gt; a &gt; span</td>
	<td>Click here to jump to recent messages.</td>
</tr>
<tr>
	<td>waitForNotText</td>
	<td>css=#archive-link-home &gt; a &gt; span</td>
	<td>Click here to jump to recent messages.</td>
</tr>
<!--Re-pin in center-->
<!--rollup doesn't open the center post menu-->
<!--*** Open ... menu manually in center -->
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.style--none:contains('Pin to channel')</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=button.style--none:contains('Pin to channel')</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=div.post__header--info &gt; div.col &gt; span.post__pinned-badge &gt; span</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=span.post__pinned-badge &gt; span</td>
	<td></td>
</tr>
<!--Un-pinning in center removes Pinned in flagged posts RHS-->
<!--rollup doesn't open the center post menu-->
<!--*** Open ... menu manually in center -->
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.style--none:contains('Un-pin from channel')</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=button.style--none:contains('Un-pin from channel')</td>
	<td></td>
</tr>
<tr>
	<td>waitForNotText</td>
	<td>css=span.post__pinned-badge &gt; span</td>
	<td>Pinned</td>
</tr>
<tr>
	<td>waitForElementNotPresent</td>
	<td>css=span.post__pinned-badge &gt; span</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=span.sidebar--right__title &gt; span</td>
	<td>Flagged Posts</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=p</td>
	<td>For both flagging and pinning!</td>
</tr>
<!--Un-pin in reply RHS removes pin from center-->
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.sidebar--right__close</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=button.sidebar--right__close</td>
	<td></td>
</tr>
<!--Pin message-->
<tr>
	<td>rollup</td>
	<td>openDotMenuForLastPost</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.style--none:contains('Pin to channel')</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=button.style--none:contains('Pin to channel')</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=span.post__pinned-badge &gt; span</td>
	<td>Pinned</td>
</tr>
<!--Open reply RHS-->
<!--*** Manually open reply RHS -->
<tr>
	<td>waitForElementPresent</td>
	<td>id=reply_textbox</td>
	<td></td>
</tr>
<!--Un-pin in RHS-->
<tr>
	<td>waitForElementPresent</td>
	<td>xpath=(//button[@type='button'])[3]</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>xpath=(//button[@type='button'])[3]</td>
	<td></td>
</tr>
<!--*** Manually click Un-pin in RHS-->
<!--Verify Pinned badge does not appear in center or RHS-->
<tr>
	<td>waitForNotText</td>
	<td>css=span.post__pinned-badge &gt; span</td>
	<td>Pinned</td>
</tr>
<tr>
	<td>waitForNotText</td>
	<td>css=p</td>
	<td>Pinned*For both flagging and pinning!</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.sidebar--right__close</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=button.sidebar--right__close</td>
	<td></td>
</tr>
<!--Pin post in DM with empty pinned posts RHS open-->
<!--Open a DM channel-->
<tr>
	<td>waitForText</td>
	<td>id=moreDirectMessage</td>
	<td>More...</td>
</tr>
<tr>
	<td>click</td>
	<td>id=moreDirectMessage</td>
	<td>More...</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>//div[@id=&quot;selectItems&quot;]//*/input</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>//div[@id=&quot;selectItems&quot;]//*/input</td>
	<td>core</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=div.more-modal__name</td>
	<td>@corey</td>
</tr>
<tr>
	<td>click</td>
	<td>css=div.more-modal__name</td>
	<td>@corey</td>
</tr>
<tr>
	<td>pause</td>
	<td>1000</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=saveItems</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=saveItems</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>id=channelHeaderDropdownButton</td>
	<td>corey</td>
</tr>
<!--Open pinned posts RHS, verify empty-->
<tr>
	<td>waitForElementPresent</td>
	<td>id=channelHeaderPinButton</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=channelHeaderPinButton</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=span.sidebar--right__title &gt; span</td>
	<td>Pinned posts in Direct Message</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=div.sidebar--right__subheader &gt; ul &gt; li &gt; span</td>
	<td>There are no pinned messages yet.</td>
</tr>
<!--Post a message and pin it to the DM channel-->
<tr>
	<td>waitForElementPresent</td>
	<td>id=post_textbox</td>
	<td></td>
</tr>
<tr>
	<td>sendKeys</td>
	<td>id=post_textbox</td>
	<td>A direct message!${KEY_ENTER}</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>xpath=(//button[@type='button'])[5]</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>xpath=(//button[@type='button'])[5]</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=span:contains('Pin to channel')</td>
	<td></td>
</tr>
<!--Pin DM in center-->
<tr>
	<td>rollup</td>
	<td>openDotMenuForLastPost</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.style--none:contains('Pin to channel')</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=button.style--none:contains('Pin to channel')</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=span.post__pinned-badge &gt; span</td>
	<td>Pinned</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=div.search-channel__name &gt; span</td>
	<td>Direct Message (with corey)</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=span.sidebar--right__title &gt; span</td>
	<td>Pinned posts in Direct Message</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=div.search-channel__name &gt; span</td>
	<td>Direct Message (with corey)</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=span.post__pinned-badge &gt; span</td>
	<td>Pinned</td>
</tr>
<tr>
	<td>waitForTextPresent</td>
	<td>Pinned*A direct message!</td>
	<td></td>
</tr>
<!--Delete pinned post from center removes it from pinned posts RHS-->
<tr>
	<td>waitForElementPresent</td>
	<td>id=channelHeaderPinButton</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=channelHeaderPinButton</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=span.sidebar--right__title &gt; span</td>
	<td>Pinned posts in Direct Message</td>
</tr>
<!--*** Open ... menu manually in center -->
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.style--none:contains('Delete')</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=button.style--none:contains('Delete')</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>id=deletePostModalButton</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=deletePostModalButton</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=li &gt; span</td>
	<td>There are no pinned messages yet.</td>
</tr>
<tr>
	<td>waitForNotText</td>
	<td>css=span.sidebar--right__title &gt; span</td>
	<td>Pinned posts in Town Square</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=span.sidebar--right__title &gt; span</td>
	<td>Pinned posts in Direct Message</td>
</tr>
<!--Open pinned posts RHS for center channel-->
<tr>
	<td>waitForElementPresent</td>
	<td>link=Pin2-${datetime}</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>link=Pin2-${datetime}</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>id=channelHeaderDropdownButton</td>
	<td>Pin2-${datetime}</td>
</tr>
<tr>
	<td>pause</td>
	<td>8000</td>
	<td></td>
</tr>
<!--Pin "For both flagging..."-->
<tr>
	<td>rollup</td>
	<td>openDotMenuForLastPost</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.style--none:contains('Pin to channel')</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=button.style--none:contains('Pin to channel')</td>
	<td></td>
</tr>
<!--Pinned list still open, switched to viewed channel-->
<tr>
	<td>waitForText</td>
	<td>css=span.sidebar--right__title &gt; span</td>
	<td>Pinned posts in Pin2-${datetime}</td>
</tr>
<tr>
	<td>waitForNotText</td>
	<td>css=div.sidebar--right__subheader &gt; ul &gt; li &gt; span</td>
	<td>There are no pinned messages yet.</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=div.search-channel__name</td>
	<td>Pin2-${datetime}</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=span.post__pinned-badge &gt; span</td>
	<td>Pinned</td>
</tr>
<!--*** Manually open ... menu for center channel post-->
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.style--none:contains('Delete')</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=button.style--none:contains('Delete')</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=div.modal-body &gt; span</td>
	<td>exact:Are you sure you want to delete this Post?</td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.btn.btn-danger</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=button.btn.btn-danger</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=span.sidebar--right__title &gt; span</td>
	<td>Pinned posts in Pin2-${datetime}</td>
</tr>
<tr>
	<td>waitForText</td>
	<td>css=div.sidebar--right__subheader &gt; ul &gt; li &gt; span</td>
	<td>There are no pinned messages yet.</td>
</tr>
<tr>
	<td>waitForElementNotPresent</td>
	<td>css=span:contains('For both flagging and pinning!')</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementNotPresent</td>
	<td>css=p:contains('For both flagging and pinning!')</td>
	<td></td>
</tr>
<!--Cleanup: Archive both channels-->
<tr>
	<td>waitForElementPresent</td>
	<td>id=channelHeaderDropdownIcon</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=channelHeaderDropdownIcon</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=#channelArchiveChannel &gt; button.style--none.</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=#channelArchiveChannel &gt; button.style--none.</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.btn.btn-danger</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=button.btn.btn-danger</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>link=Pin-*</td>
	<td></td>
</tr>
<tr>
	<td>waitForText</td>
	<td>id=channelHeaderDropdownButton</td>
	<td>Pin-*</td>
</tr>
<tr>
	<td>click</td>
	<td>id=channelHeaderDropdownButton</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=#channelArchiveChannel &gt; button.style--none.</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=#channelArchiveChannel &gt; button.style--none.</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=button.btn.btn-danger</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=button.btn.btn-danger</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementNotPresent</td>
	<td>link=Pin-*</td>
	<td></td>
</tr>
<!--Log out test-->
<tr>
	<td>waitForElementPresent</td>
	<td>id=sidebarHeaderDropdownButton</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>id=sidebarHeaderDropdownButton</td>
	<td></td>
</tr>
<tr>
	<td>waitForElementPresent</td>
	<td>css=#logout &gt; button.style--none</td>
	<td></td>
</tr>
<tr>
	<td>click</td>
	<td>css=#logout &gt; button.style--none</td>
	<td></td>
</tr>
</tbody></table>
</body>
</html>
